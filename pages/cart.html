<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cart | Midnight Fiction</title>
  <link rel="stylesheet" href="../css/style.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    :root{
      --bg1:#4f1c51; --bg2:#210f37; --cream:#FAF4EE; --panel:#fff6f3; --muted:#8f5e57; --accent:#e9b886; --text:#2e0f3f;
    }
    body{font-family:'Poppins',sans-serif;background:radial-gradient(circle at top,var(--bg1) 58%,var(--bg2) 100%);color:#fff;min-height:100vh}
    .cart-wrap{max-width:720px;margin:48px auto;padding:24px}
  .cart-container{background:var(--cream);color:var(--text);border-radius:24px;padding:22px;box-shadow:0 10px 30px rgba(0,0,0,0.18)}
  .cart-item{display:flex;align-items:center;gap:20px;padding:16px;border-radius:14px}
  .cart-item + .cart-item{border-top:1px solid rgba(0,0,0,0.04);margin-top:6px;padding-top:18px}
  .cart-item .col-item{width:40%}
  .cart-item .col-price{width:18%;text-align:center}
  .cart-item .col-qty{width:22%;text-align:center}
  .cart-item .col-total{width:20%;text-align:right}
    .thumb{width:64px;height:64px;border-radius:12px;object-fit:cover;flex-shrink:0}
  .info{flex:1;min-width:0}
  .name{font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}
    .tag{display:inline-block;background:var(--accent);color:var(--text);padding:4px 8px;border-radius:8px;font-size:12px;margin-top:6px}
    .qty{display:flex;align-items:center;gap:8px;border-radius:14px;padding:6px 8px;background:transparent}
    .qty button{width:28px;height:28px;border-radius:8px;border:1px solid rgba(0,0,0,0.06);background:transparent;color:var(--text);font-weight:700}
    .price{font-weight:700;color:var(--text);min-width:70px;text-align:right}
    .remove{margin-left:12px;background:rgba(0,0,0,0.08);color:var(--text);width:36px;height:36px;border-radius:999px;display:flex;align-items:center;justify-content:center}
    .empty{background:rgba(255,255,255,0.06);padding:24px;border-radius:12px;text-align:center}
    .footer{position:fixed;right:24px;left:24px;bottom:24px;max-width:720px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;gap:12px}
    .checkout{background:var(--accent);color:var(--text);padding:12px 20px;border-radius:14px;font-weight:700}
    #checkoutBtn{position:relative;z-index:40}
    @media(min-width:768px){.cart-wrap{margin-top:72px}}
  </style>
</head>
<body class="min-h-screen">
    <nav class="w-full flex items-center justify-between max-w-6xl mx-auto">
        <div class="flex-shrink-0">
            <a href="../index.html">
            <img src="../images/2.png" alt="Midnight Fiction Logo" class="h-32 object-contain" />
            </a>
        </div>

        <div class="bg-[#FAF4EE] rounded-2xl px-10 py-3 flex items-center justify-between shadow-lg w-4/5">
            <ul class="flex gap-10 text-[#8f5e57] font-medium text-[15px]">
                <li class="relative group">
                    <a href="../index.html" class="transition-all duration-300 group-hover:text-[#7F2549]">
                    Home
                    <span class="absolute left-0 bottom-0 w-0 h-[2px] bg-[#7F2549] transition-all duration-300 group-hover:w-full"></span>
                    </a>
                </li>
                <li class="relative group">
                    <a href="../pages/products.html" class="transition-all duration-300 group-hover:text-[#7F2549]">
                    All Products
                    <span class="absolute left-0 bottom-0 w-0 h-[2px] bg-[#7F2549] transition-all duration-300 group-hover:w-full"></span>
                    </a>
                </li>
                <li class="relative group">
                    <a href="../pages/signin.html" class="transition-all duration-300 group-hover:text-[#7F2549]">
                    Sign In
                    <span class="absolute left-0 bottom-0 w-0 h-[2px] bg-[#7F2549] transition-all duration-300 group-hover:w-full"></span>
                    </a>
                </li>
                <li class="relative group">
                    <a href="../pages/signup.html" class="transition-all duration-300 group-hover:text-[#7F2549]">
                    Sign Up
                    <span class="absolute left-0 bottom-0 w-0 h-[2px] bg-[#7F2549] transition-all duration-300 group-hover:w-full"></span>
                    </a>
                </li>
            </ul>

            <div class="flex items-center gap-4 ml-6 text-[#8f5e57] text-lg">
            <a href="../pages/cart.html" class="transition-transform duration-300 hover:scale-110 hover:rotate-6">
                <img src="../images/icons/cart.svg" alt="Cart" class="w-5 h-5" />
            </a>
            <a href="../pages/profile.html" class="transition-transform duration-300 hover:scale-110 hover:rotate-6">
                <img src="../images/icons/user.svg" alt="User" class="w-5 h-5" />
            </a>
            </div>
        </div>
    </nav>

  <section class="max-w-6xl mx-auto px-6 mb-[200px]">
    <div class="mb-6 text-center">
      <h1 class="text-3xl md:text-4xl font-semibold text-[#FAF4EE]">Your Cart</h1>
      <p class="text-sm md:text-base text-[#e9b886] mt-2">Review the items below before you checkout</p>
      <div id="cartMeta" class="mt-3 flex items-center justify-center gap-3">
        <span id="itemCount" class="inline-flex items-center bg-[#FAF4EE] text-[#2e0f3f] px-3 py-1 rounded-full text-sm font-medium">0 items</span>
      </div>
    </div>

    <div class="mx-auto max-w-4xl">
      <div class="cart-container">
        <div class="hidden md:flex items-center text-[#8f5e57] text-sm font-medium mb-4 px-2 py-2">
          <div class="w-1/3">Item</div>
          <div class="w-1/3 text-center">Price</div>
          <div class="w-1/4 text-center">Quantity</div>
          <div class="w-1/6 text-right">Total</div>
        </div>

        <div id="list" class="space-y-0">
        </div>
      </div>

      <div id="empty" class="mt-6 hidden">
        <div class="empty text-sm">Your cart is empty.</div>
      </div>

      <div class="mx-auto max-w-6xl mt-8">
        <div class="rounded-2xl bg-[#FAF4EE] text-[#2e0f3f] px-6 py-6 shadow-md">
          <div class="flex items-center justify-between mb-3">
            <div class="text-sm text-[#8f5e57]">Subtotal</div>
            <div id="subtotalAmount" class="font-semibold">$0.00</div>
          </div>
          <div class="flex items-center justify-between mb-3">
            <div class="text-sm text-[#8f5e57]">Sales Tax</div>
            <div id="taxAmount" class="font-medium">$0.00</div>
          </div>
          <hr class="my-3 border-t border-[#e6dcd8]" />
          <div class="flex items-center justify-between mb-4">
            <div class="text-sm text-[#8f5e57]">Grand total</div>
            <div id="grandTotal" class="text-xl font-semibold">$0.00</div>
          </div>

          <button id="checkoutBtn" type="button" class="w-full inline-block text-center bg-[#e9b886] text-[#2e0f3f] px-5 py-3 rounded-lg shadow-sm font-semibold">Checkout</button>
        </div>
      </div>
    </div>
  </section>

  <div id="checkoutModal" class="hidden fixed inset-0 z-50 flex items-center justify-center">
    <div id="checkoutBackdrop" class="absolute inset-0 bg-black/50"></div>
    <div class="relative bg-[#FAF4EE] text-[#2e0f3f] rounded-2xl w-full max-w-md mx-4 p-6 shadow-lg z-10">
      <div class="flex justify-between items-start mb-4">
        <h3 class="text-lg font-semibold">Checkout</h3>
        <button id="checkoutClose" aria-label="Close checkout" class="text-[#2e0f3f]">✕</button>
      </div>
      <div class="mb-4">
        <div class="flex justify-between text-sm text-[#8f5e57]"><span>Subtotal</span><span id="modalSubtotal">$0.00</span></div>
        <div class="flex justify-between text-sm text-[#8f5e57]"><span>Sales Tax</span><span id="modalTax">$0.00</span></div>
        <hr class="my-3 border-t border-[#e6dcd8]" />
        <div class="flex justify-between font-semibold text-xl"><span>Grand total</span><span id="modalGrand">$0.00</span></div>
      </div>
      <div class="flex gap-3">
        <button id="confirmCheckout" class="flex-1 bg-[#4f1c51] text-[#FAF4EE] px-4 py-2 rounded-lg font-semibold">Confirm Purchase</button>
        <button id="cancelCheckout" class="flex-1 bg-transparent border border-[#e6dcd8] text-[#2e0f3f] px-4 py-2 rounded-lg">Cancel</button>
      </div>
      <p id="checkoutMessage" class="text-sm text-[#4f1c51] mt-3 hidden"></p>
    </div>
  </div>

<section class="relative bg-[#210F37] z-0 footer-wave-spacer">
    <div class="absolute bottom-[-90px] left-0 w-full overflow-hidden leading-none" aria-hidden="true">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="#FAF4EE" fill-opacity="1" d="M0,96L48,117.3C96,139,192,181,288,202.7C384,224,480,224,576,208C672,192,768,160,864,160C960,160,1056,192,1152,202.7C1248,213,1344,203,1392,197.3L1440,192L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path>
    </div>
</section>

<footer class="site-footer">
    <div class="footer-inner">
    <div class="policy-links" aria-label="policy links">
        <a href="#">Terms of Use</a>
        <a href="#">Terms for Paid Service</a>
        <a href="#">Child & Youth Policy</a>
        <a href="#">Privacy Policy</a>
    </div>

    <div class="info-links">
        <ul>
        <li><a href="#">Who is Midnight Fiction?</a></li>
        <li><a href="#">Gift Cards</a></li>
        <li><a href="#">Store Locator</a></li>
        <li><a href="#">FAQ</a></li>
        <li><a href="#">Returns & Refunds</a></li>
        <li><a href="#">Shipping</a></li>
        <li><a href="#">Wholesale</a></li>
        <li><a href="#">Events</a></li>
        <li><a href="#">Search</a></li>
        <li><a href="#">Refund policy</a></li>
        </ul>
    </div>

    <div style="margin-top: -55px;" class="footer-brand" aria-label="brand and socials">
        <img src="../images/1.png" alt="Midnight Fiction Logo" style="height: 250px;" class="logo" />
        <div style="margin-top: -80px;" class="copyright font-semibold">2025 © Midnight Fiction All Rights Reserved</div>
        <div class="footer-socials flex justify-center md:justify-end gap-5 mt-4">
<a href="#" 
    target="_blank" 
    rel="noopener noreferrer" 
    title="Instagram — MidnightFiction" 
    aria-label="Instagram — MidnightFiction"
    class="hover:opacity-80 transition-opacity duration-200">
    <img src="../images/icons/instagram.svg" alt="Instagram" class="w-5 h-5" />
</a>

<a href="#" 
    target="_blank" 
    rel="noopener noreferrer" 
    title="Facebook — MidnightFiction" 
    aria-label="Facebook — MidnightFiction"
    class="hover:opacity-80 transition-opacity duration-200">
    <img src="../images/icons/facebook.svg" alt="Facebook" class="w-5 h-5" />
</a>

<a href="#" 
    target="_blank" 
    rel="noopener noreferrer" 
    title="TikTok — @MidnightFiction" 
    aria-label="TikTok — MidnightFiction"
    class="hover:opacity-80 transition-opacity duration-200">
    <img src="../images/icons/tiktok.svg" alt="TikTok" class="w-5 h-5" />
</a>

<a href="#" 
    target="_blank" 
    rel="noopener noreferrer" 
    title="Twitter — MidnightFiction" 
    aria-label="Twitter — MidnightFiction"
    class="hover:opacity-80 transition-opacity duration-200">
    <img src="../images/icons/twitter.svg" alt="Twitter" class="w-5 h-5" />
</a>
</div>
    </div>
    </div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const STORAGE_KEY = 'cartItems';
  const TAX_RATE = 0.08;
  const sampleCart = [
    { id: 1, image: '../images/cat.jpg', name: 'Lorem Ipsum Dolor Sic Amet', price: 45, tag: 'Pink', qty: 1 },
    { id: 2, image: '../images/cat.jpg', name: 'Lorem Ipsum Dolor Sic Amet', price: 45, tag: 'Pink', qty: 1 },
    { id: 3, image: '../images/cat.jpg', name: 'Lorem Ipsum Dolor Sic Amet', price: 45, tag: 'Pink', qty: 1 },
    { id: 4, image: '../images/cat.jpg', name: 'Lorem Ipsum Dolor Sic Amet', price: 45, tag: 'Pink', qty: 1 }
  ];

  const els = {
    list: document.getElementById('list'),
    empty: document.getElementById('empty'),
    subtotal: document.getElementById('subtotalAmount'),
    tax: document.getElementById('taxAmount'),
    grand: document.getElementById('grandTotal'),
    itemCount: document.getElementById('itemCount'),
    checkoutBtn: document.getElementById('checkoutBtn'),
    modal: document.getElementById('checkoutModal'),
    backdrop: document.getElementById('checkoutBackdrop'),
    close: document.getElementById('checkoutClose'),
    cancel: document.getElementById('cancelCheckout'),
    confirm: document.getElementById('confirmCheckout'),
    msg: document.getElementById('checkoutMessage'),
    modalSubtotal: document.getElementById('modalSubtotal'),
    modalTax: document.getElementById('modalTax'),
    modalGrand: document.getElementById('modalGrand')
  };

  let cart;
  try {
    cart = JSON.parse(localStorage.getItem(STORAGE_KEY)) || sampleCart.slice();
  } catch {
    cart = sampleCart.slice();
  }

  const saveCart = () => localStorage.setItem(STORAGE_KEY, JSON.stringify(cart));

  function render() {
    const { list, empty, itemCount } = els;
    list.innerHTML = '';

    if (!cart.length) {
      empty.classList.remove('hidden');
      updateSummary(0, 0, 0);
      if (itemCount) itemCount.textContent = '0 items';
      return;
    }

    empty.classList.add('hidden');
    cart.forEach(item => {
      const total = (item.price * item.qty).toFixed(2);
      const div = document.createElement('div');
      div.className = 'cart-item';
      div.innerHTML = `
        <div class="col-item flex items-center gap-4">
          <img src="${item.image}" class="thumb" alt="${item.name}">
          <div class="info">
            <div class="name">${item.name}</div>
            <div class="tag">${item.tag}</div>
          </div>
        </div>
        <div class="col-price text-[#8f5e57]">$${item.price.toFixed(2)}</div>
        <div class="col-qty flex items-center">
          <button class="dec">-</button>
          <div class="qtd mx-3">${item.qty}</div>
          <button class="inc">+</button>
        </div>
        <div class="col-total">$${total}</div>
        <button class="remove text-red-500" data-id="${item.id}">✕</button>
      `;
      list.appendChild(div);
    });

    if (itemCount) itemCount.textContent = `${cart.length} items`;
    updateSummary();
  }

  function updateSummary() {
    const subtotal = cart.reduce((s, i) => s + i.price * i.qty, 0);
    const tax = subtotal * TAX_RATE;
    const grand = subtotal + tax;

    if (els.subtotal) els.subtotal.textContent = `$${subtotal.toFixed(2)}`;
    if (els.tax) els.tax.textContent = `$${tax.toFixed(2)}`;
    if (els.grand) els.grand.textContent = `$${grand.toFixed(2)}`;
  }

  function changeQty(id, diff) {
    cart = cart.map(i => i.id === id ? { ...i, qty: Math.max(1, i.qty + diff) } : i);
    saveCart();
    render();
  }

  function removeItem(id) {
    cart = cart.filter(i => i.id !== id);
    saveCart();
    render();
  }

  els.list.addEventListener('click', e => {
    const item = e.target.closest('.cart-item');
    if (!item) return;
    const id = +item.querySelector('.remove')?.dataset?.id;
    if (!id) return;
    if (e.target.classList.contains('inc')) changeQty(id, +1);
    if (e.target.classList.contains('dec')) changeQty(id, -1);
    if (e.target.classList.contains('remove')) removeItem(id);
  });

  const openModal = () => {
    els.modal?.classList.remove('hidden');
    els.modalSubtotal.textContent = els.subtotal.textContent;
    els.modalTax.textContent = els.tax.textContent;
    els.modalGrand.textContent = els.grand.textContent;
  };

  const closeModal = () => {
    els.modal?.classList.add('hidden');
    els.msg?.classList.add('hidden');
  };

  els.checkoutBtn?.addEventListener('click', e => {
    e.preventDefault();
    openModal();
  });

  [els.backdrop, els.close, els.cancel].forEach(el =>
    el?.addEventListener('click', closeModal)
  );

  els.confirm?.addEventListener('click', () => {
    localStorage.setItem('checkoutTotal', els.grand?.textContent?.trim() || '$0.00');
    els.msg.textContent = 'Thank you — your order was successful.';
    els.msg.classList.remove('hidden');
    els.confirm.disabled = true;
    els.confirm.classList.add('opacity-60', 'cursor-not-allowed');

    setTimeout(() => {
      els.confirm.disabled = false;
      els.confirm.classList.remove('opacity-60', 'cursor-not-allowed');
      closeModal();
    }, 15000);
  });

  render();
});
</script>

</body>
</html>